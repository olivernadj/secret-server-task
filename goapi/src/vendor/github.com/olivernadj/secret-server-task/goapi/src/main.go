/*
 * Secret Server
 *
 * This is an API of a secret service. You can save your secret by using the API. You can restrict the access of a secret after the certen number of views or after a certen period of time.
 *
 * API version: 1.0.0
 * Generated by: Swagger Codegen (https://github.com/swagger-api/swagger-codegen.git)
 */

package main

import (
	"flag"
	"fmt"
	"github.com/olivernadj/secret-server-task/goapi/src/go"
	"log"
	"net/http"
	"os"
	"strconv"
)


func main() {
	port      := flag.Int64("p", 8080, "The port to listen on for HTTP requests.")
	usageInfo := flag.Bool("h", false, "Prints usage information")
	flag.Usage = func() {
		fmt.Fprintf(os.Stderr, "Usage: %s [options]\nOptions are:\n", os.Args[0])
		flag.PrintDefaults()
	}
	flag.Parse()
	if *usageInfo {
		flag.Usage()
		os.Exit(1)
	}
	log.Printf("Server started on %v port", strconv.FormatInt(*port, 10))
	router := swagger.NewRouter()
	log.Fatal(http.ListenAndServe(":" + strconv.FormatInt(*port, 10), router))
}
